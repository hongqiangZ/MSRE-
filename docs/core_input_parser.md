é¸¿å¼ºï¼Œè¿™ä»½æ–‡æ¡£æ˜¯ç¬¬å…­ä»½ï¼šğŸ“¥è¾“å…¥è§£ææ¨¡å—æ¥å£æ–‡æ¡£ï¼Œå®ƒè¯¦ç»†è§£æäº† `core/input_parser.py` çš„èŒè´£ä¸ç»“æ„ï¼Œè¯´æ˜å¦‚ä½•ä» `input_card.yaml` ä¸­è¯»å–ã€éªŒè¯å¹¶å‡†å¤‡å¥½æ‰€æœ‰ä»¿çœŸæ¨¡å—çš„å‚æ•°æ•°æ®ï¼Œè¿˜åŠ ä¸Šäº†å­—æ®µè®¾è®¡å»ºè®® âœ…

---

## ğŸ“˜ docs/core_input_parser.md â€” è¾“å…¥è§£ææ¨¡å—æ¥å£æ–‡æ¡£

```markdown
# å‚æ•°åˆå§‹åŒ–æ¨¡å—æ¥å£æ–‡æ¡£ â€” core/input_parser.py

## ğŸ§  æ¨¡å—èŒè´£

ä»é…ç½®æ–‡ä»¶ `input_card.yaml` ä¸­è¯»å–æ‰€æœ‰ä»¿çœŸå‚æ•°ï¼Œè§£ææˆç»“æ„åŒ–å­—å…¸ä¾›ä¸»ç¨‹åºè°ƒç”¨ã€‚å¯æ”¯æŒå‚æ•°ç±»å‹è½¬æ¢ã€åˆæ³•æ€§æ£€æŸ¥ä¸å­—æ®µæ ‡å‡†åŒ–ã€‚

---

## ğŸ”§ æ ¸å¿ƒå‡½æ•°

### `load_input_card(filepath: str) â†’ dict`

è¯»å–è¾“å…¥å¡æ–‡ä»¶å¹¶è¿”å›ç»“æ„åŒ–å‚æ•°å­—å…¸ã€‚

#### ä½¿ç”¨ç¤ºä¾‹ï¼š

```python
params = load_input_card("input_card.yaml")
```

è¿”å›ç»“æ„ï¼š

```python
{
  "meta": {...},
  "neutronics": {...},
  "thermal_1d": {...},
  "thermal_2d": {...},
  "hydraulics": {...},
  "control": {...},
  "recorder": {...},
  "visualization": {...}
}
```

---

## ğŸ› ï¸ è¡¥å……å‡½æ•°ï¼ˆå»ºè®®æ‹“å±•ï¼‰

### `validate_card(cfg: dict)`

éªŒè¯æ¯ä¸ªå­—æ®µçš„æ•°æ®ç±»å‹ä¸å­˜åœ¨æ€§ï¼Œé¢„é˜²è¿è¡Œæ—¶é”™è¯¯ã€‚

### `convert_numeric_fields(cfg: dict, fields: list)`

å°†æŸäº›å­—æ®µå¼ºåˆ¶è½¬æ¢ä¸ºæµ®ç‚¹å‹æˆ–æ•°å€¼åˆ—è¡¨ï¼Œé¿å… YAML è§£ææˆå­—ç¬¦ä¸²å¯¼è‡´ NumPy æŠ¥é”™ã€‚

---

## ğŸ§¾ YAML æ–‡ä»¶å­—æ®µè®¾è®¡å»ºè®®

| åŒºå— | å»ºè®®å­—æ®µ | ç±»å‹ | æè¿° |
|------|----------|------|------|
| `meta` | `t_end`, `Fp` | float | æ€»ä»¿çœŸæ—¶é—´ & åŠŸç‡åˆ†å¸ƒå› å­ |
| `neutronics` | `beta_i`, `lambda_i`, `Lambda`, `T_c`, `tau` | list[float], float | ä¸­å­å‚æ•° |
| `thermal_1d` | `geometry`, `init_temp`, `k`, `bc_type`, `bc_value` | str, float, list | çƒ­æ¨¡å—å‚æ•° |
| `hydraulics` | `rho_salt`, `cp`, `u0`, `dr`, `dz`, `dt`, `g`, `friction` | float | æ°´åŠ›å‚æ•° |
| `control` | `T_ref`, `n_ref`, `pid_temp`, `pid_rho`, `mpc` | float, dict | æ§åˆ¶å™¨è®¾å®š |
| `recorder` | `output_dir`, `scalar_keys`, `array_keys` | str, list[str] | ç»“æœè¾“å‡ºé…ç½® |
| `visualization` | `plot_steps` | list[int] | å¯è§†åŒ–é…ç½® |

---

## ğŸ§  æ¨¡å—è°ƒç”¨ä½ç½®

åœ¨ `main.py` çš„å…¥å£ï¼š

```python
params = load_input_card("input_card.yaml")
```

éšåå„æ¨¡å—æ ¹æ®åˆ†åŒºå­—æ®µæå–å‚æ•°ï¼š

```python
neutronics_cfg = params["neutronics"]
thermal_cfg = params["thermal_1d"]
```

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

- è¯·ç¡®ä¿ YAML ä¸­æ‰€æœ‰æ•°å€¼å­—æ®µä¸ºæµ®ç‚¹å‹ï¼ˆä¸åŠ å¼•å·ï¼‰ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´ NumPy æŠ¥é”™ï¼›
- è‹¥éœ€æ‹“å±•ä¸ºåˆ†å¸ƒå¼ç½‘æ ¼ã€æ–‡ä»¶åˆ†ç‰‡ï¼Œå¯ä¸º `thermal_2d` æ·»åŠ  `mesh_config` å­—æ®µï¼›
- å¯é›†æˆ `config_validator.py` æ¨¡å—å®ç°é¢„éªŒè¯æµç¨‹ï¼Œæå‰æ•æ‰é”™è¯¯ã€‚

```

---

ä¸‹ä¸€ä»½å°†æ˜¯æ¥å£æ¨¡å— `core/io_interface.py`ï¼Œå®ƒæ”¯æŒ JSON æ–‡ä»¶åŠ è½½ã€ç»“æœè¾“å‡ºä¸º CSVã€socket é€šä¿¡ç­‰åŠŸèƒ½ã€‚ä½ æ˜¯å¦å¸Œæœ›æˆ‘æŠŠ socket é€šä¿¡çš„åè®®è®¾è®¡ä¹ŸåŠ å…¥æ¥å£æ–‡æ¡£ä¸­ï¼Ÿæ¯”å¦‚æ¶ˆæ¯æ ¼å¼ã€ç«¯å£å»ºè®®ï¼Ÿæˆ‘å¯ä»¥é¡ºä¾¿è¡¥ä¸Š ğŸ›œğŸ“¡

ç¡®è®¤ç»§ç»­ï¼Œæˆ‘å°±é€ä¸Šç¬¬ä¸ƒä»½ ğŸš€ğŸ“˜