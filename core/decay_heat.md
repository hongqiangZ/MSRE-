太棒了鸿强，现在我们就来实现衰变热模块☢️，为你熔盐堆在停堆、低功率或断流等场景下提供额外的热源支撑。

根据你提供的文献内容，第 3.3.3 节共列出了三种衰变热建模方式，我们将实现其中第二种：**基于指数项拟合的解析公式模型（式 3.48）**。这是 TREND 程序采用的方法，适用于动态中等精度建模，非常适合集成进你的系统。

---

## 🧱 模块结构概览

📁 位置建议：`core/decay_heat.py`

```python
import numpy as np

class DecayHeatModel:
    """
    衰变热计算器，使用指数项拟合方法（文献式3.48）
    P_decay(t) = P0 * (A0 + A1·e^{-t/t1} + A2·e^{-t/t2} + A3·e^{-t/t3})
    """

    def __init__(self, A0, A1, A2, A3, t1, t2, t3):
        self.A0 = A0
        self.A1 = A1
        self.A2 = A2
        self.A3 = A3
        self.t1 = t1
        self.t2 = t2
        self.t3 = t3

    def compute(self, P0, t):
        """
        计算 t 秒时刻的衰变热功率

        参数：
        - P0: 停堆前的堆芯功率（W）
        - t: 停堆后经历的时间（秒）

        返回：
        - 衰变热功率（W）
        """
        A0, A1, A2, A3 = self.A0, self.A1, self.A2, self.A3
        t1, t2, t3 = self.t1, self.t2, self.t3

        return P0 * (A0 + A1 * np.exp(-t / t1) +
                     A2 * np.exp(-t / t2) +
                     A3 * np.exp(-t / t3))
```

---

## 🔬 默认拟合参数（可选）

文献表 6 给出一组典型参数（源于 ORIGEN 曲线拟合）：

```python
default_decay_model = DecayHeatModel(
    A0=0.00021,
    A1=0.038,
    A2=0.01799,
    A3=0.00727,
    t1=34.33,
    t2=2265.98,
    t3=607271.84
)
```

你也可以让用户在输入卡中自定义这几个系数。

---

## ✅ 用法举例

```python
from core.decay_heat import DecayHeatModel

model = DecayHeatModel(0.00021, 0.038, 0.01799, 0.00727, 34.33, 2265.98, 607271.84)

# 模拟 P0 = 10MW，停堆后 600 秒
P_decay = model.compute(P0=10e6, t=600)  # 约为某个 kW 级功率
```

---

## 🌟 拓展建议（可选）

| 功能                  | 描述                                               |
|-----------------------|----------------------------------------------------|
| 时序输入 `P0(t)`     | 考虑堆功率为动态衰减的函数，用积分近似计算衰变热   |
| 多物理源拟合         | 引入锕系核素、结构活化热源分量                     |
| 修正项 `G(t)`        | 加入 RELAP5 中经验修正因子 G(t)（公式 3.53–3.54） |
| 拟合模块             | 从 `.csv` 中加载衰变热表格 → 自动拟合 A₀~A₃ 系数 |

---

我现在可以把这段代码写成完整的文件内容发给你，也可以直接添加进初始化脚本或让它和主回路温度一起联动。需要我在模拟器里为 `P(t)` 添加 `P_decay(t)` 支路输出吗？或者你希望测试它在热构件模块中是否足以维持足温状态？

你来定节奏，我继续铺好数值的钢轨🚄✨